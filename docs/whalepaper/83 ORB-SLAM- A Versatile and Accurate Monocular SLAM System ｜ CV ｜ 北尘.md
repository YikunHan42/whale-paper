
## 背景
### 概念
SLAM为Simultaneous Localization And Mapping的缩写，意为同时定位与建图。解决：一个配备有传感器的移动载体，在未知环境中移动，通过传感器数据，对载体位姿及环境同时进行估计的问题。
![[Pasted image 20230830204126.png]]
![[Pasted image 20230830204136.png]]
### SLAM分类：
根据优化方法分类：
1. 基于滤波的方法
	1. ![[Pasted image 20230830204226.png]]
2. .基于优化的方法
	1. ![[Pasted image 20230830204238.png]]
根据使用传感器分类：
1. 视觉SLAM
	1. ![[Pasted image 20230830204253.png]]
2. 激光SLAM
## 主要贡献及相关工作
### 主要贡献：
1. 在SLAM的四个任务：追踪，建图，重定位，回环都使用ORB特征。
2. 在大尺度环境下实时的建图与定位。
3. 基于本征图的回环优化加速。
4. 高鲁棒性且实时性的相机重定位，可用于追踪失败时相机的恢复及地图重用。
5. 自适应平面及非平面，鲁棒且准确的初始化过程。
6. 适者生存的关键帧策略，提高追踪的鲁棒性，并使ORB_SLAM能在环境中全生命周期运行。

### 相关工作：
1. 前后端分离，关键帧：PTAM(Klein and Murray, 2007)
2. 基于词袋模型的可扩展识别：词袋模型（D. Nister and H. Stewenius 2006）
3. 基于统计学的初始化模型选择方法（ Torr et al 1999）
4. 匀速相机运动模型： MonoSLAM(A. J. Davison 2007)
5. 运动BA，滑窗BA，7自由度的姿态图优化(Strasdat et. al 2010)

## 系统总览
### 特征选择
1. （为什么选择ORB特征？）为达到实时性，每幅图像特征点提取耗时需要少于33ms ，SIFT (∼ 300ms) ，SURF (∼ 300ms) ，A-KAZE (∼ 100ms)，均耗时过长，最后选择了ORB特征点（22ms）。
2. ORB全名为Oriented FAST and Rotated BRIEF，它采用改进的FAST关键点检测方法，使其具有方向性，并采用具有旋转不变性的BRIEF特征描述子
![[Pasted image 20230830204639.png]]
![[Pasted image 20230830204643.png]]
### 系统总览
系统总览
1. Tracking（前端）
2. Local Mapping（后端）
3. Loop Closing（后端）
4. 类数据库（图二）：
	1. MAP
	2. PALCE RECOGNITION
![[Pasted image 20230830205820.png]]

![[Pasted image 20230830205827.png]]

### 回环检测
DBoW2视觉词袋库，用于根据图像建立索引，并将其转换成词袋表示。
![[Pasted image 20230830210428.png]]


#### 构建词典的步骤
![[Pasted image 20230830210450.png]]
![[Pasted image 20230830210455.png]]
## 系统初始化
### 特征点匹配
1. 计算描述子的汉明距离（异或操作），找到最优匹配点及次优匹配点。
2. 如果二者距离之比，小于阈值，则认为匹配成功。
3. 统计匹配点描述子的旋转方向，找出其中三个主方向
4. 剔除旋转方向不是主方向的匹配点
![[Pasted image 20230830210555.png]]
![[Pasted image 20230830210600.png]]
### 对极几何
通过匹配好的特征点对，恢复相机运动。
![[Pasted image 20230830211300.png]]
![[Pasted image 20230830211328.png]]
![[Pasted image 20230830211223.png]]
## 追踪
1. 单帧姿态初始估计
2. 局部地图追踪
3. 关键帧判断

![[Pasted image 20230830210709.png]]
![[Pasted image 20230830210732.png]]
### 估计方式
![[截屏2023-08-30 21.14.47.png]]
![[Pasted image 20230830211438.png]]
### 局部地图追踪
1. K1:与当前帧具有共视点的关键帧。
2. K2:与k1在共视图中相邻的关键帧
还有一个共视点最多的关键帧，作为参考帧
![[Pasted image 20230830211544.png]]
#### 关键帧判断
1. 重定位或上一关键帧插入之后至少距离20帧
2. 追踪点大于50个点
3. local map线程处于空闲状态
4. 与参考帧追踪的点数，少于10%

第1点，保证良好的重定位效果
第2点，保证良好的追踪效果
第3点，工程需求
第4点，基于视觉改变的判断，决定是否为关键帧，而PTAM是固定距离生成关键帧。


## 局部建图

#### 更新共视图及生成树
1. 新的关键帧插入共视图，并建立新边，同时更新生成树
![[Pasted image 20230830211656.png]]

#### 不稳定地图点剔除
地图点必须满足：
1. 在预测能看到它的关键帧中，至少四分之一的帧中可以找到该点。
2. 在创建该地图点之后，至少有三个关键帧观测到该点。
![[Pasted image 20230830211712.png]]
#### 新地图点生成
1. 未匹配的特征点，会与共视图中其他关键帧的未匹配点进行匹配。
2. 匹配成功并通过校验，会进行三角化，然后创建新的地图点。
3. 使用该地图点与其他关键帧进行投影匹配。
#### Local BA及关键帧剔除
1. 当前帧Ki，共视图中所有的关键帧，及其所有观测的地图点，进行BA优化。
2. 在优化过程及结束时，会进行外点剔除
3. 一帧点的90%的点，能被其他三个关键帧看到，则该帧会被剔除。

## 回环检测

#### 候选回环帧检测
1. 共视图中权重为30以上的点的关键帧，计算向量距离。取其中最低的值，作为检索的最小值
2. 在所有关键帧中，查询相似度不小于该值的关键帧去除刚才的共视关键帧
3. 连续性验证
![[Pasted image 20230830211820.png]]
#### 回环融合
1. 使用求得的相似变换，修正当前关键帧位姿
2. 基于该修正的关键帧位姿，修正与其相连的关键帧位姿
3. 回环帧及其共视帧的地图点，投影至当前帧及其相连的关键帧上，在较小区域进行匹配。匹配成功的地图点融合为一点。
4. 所有涉及调整的关键帧，会在共视图中建立新边。
5. 本征图优化
### 全局闭环优化
![[Pasted image 20230830211915.png]]

## 实验效果

### 数据集和实验环境
数据集
1. 使用NewCollege 大型机器人序列，评估系统的一般性能。
2. 在16个TUM RGB-D基准的手持室内序列中，评估定位精度，重新定位和终身运行能力。
3. KITTI数据集中的10个汽车户外数据，测试大尺度室外运行效果
实验环境
1. Intel Core i7-4700MQ (4 cores @ 2.40GHz)
2. 8Gb RAM
### 各维度验证
#### 初始化效果
![[截屏2023-08-30 21.22.45.png]]
#### 回环实时性和效果验证
![[截屏2023-08-30 21.22.57.png]]
![[截屏2023-08-30 21.23.15.png]]
#### 轨迹姿态估计精度
![[Pasted image 20230830212402.png]]
#### 回环范围验证 
![[Pasted image 20230830212456.png]]
![[Pasted image 20230830212508.png]]

![[Pasted image 20230830212542.png]]
#### 全周期运行验证
![[Pasted image 20230830212604.png]]
![[Pasted image 20230830212611.png]]
#### BA时间、策略和误差
![[Pasted image 20230830212706.png]]
![[Pasted image 20230830212709.png]]
## 总结
1. 本文提出了一个完整的单目视觉SLAM系统，可以处理来自室内和室外场景以及来自汽车、机器人和手持设备的场景下的数据，小场景下精度可达到1cm以下。
2. ORB_SLAM基于过去众多优秀成果，将PTAM的多功能性扩展到该系统难以处理的环境中，具有高鲁棒，适应场景灵活及几乎最高的准确性。
3. 适者生存的关键帧筛选机制，对于快速运动场景及纹理少的场景的鲁棒追踪十分有效。
4. 与最近出现的DTAM ，LSD-SLAM等直接法，混合法如SVO相比，基于特征点法的ORB_SLAM精度更高，而且不会丢弃传感器原始观测值。未来特征点法与直接法相结合是一个可研究的点。
5. 未来的工作：很远的地方，视差会变得很小，这时候误差会很大，这是可以改进的。另外利用当前ORB_SLAM精确的关键帧位姿估计及地图点估计，构建稠密的地图，对将来该算法的应用会有很大提升。

![[Pasted image 20230830212745.png]]